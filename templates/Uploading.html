<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PGN uploading</title>
    <script src="PGNV/lib/pgnv.js" type="text/javascript"></script>
    <script src="js/jquery-3.6.2.min.js" type="text/javascript"></script>
    <script src="js/PgnViewNextMoves.js" type="text/javascript"></script>
    

</head>
<body class="merida zeit">

    <input type="file" onchange="previewFile()" accept=".pgn"/><br />

<div id="board" style="width: 400px"></div>


<script>
    var PgnViewer = PGNV.pgnView('board', { pgn:'',  headers: false})
    placeNextMoveElement();

      
function previewFile() {
    const [file] = document.querySelector('input[type=file]').files;
    const reader = new FileReader();


    reader.addEventListener("load", () => {
      var pgnString = reader.result;
      pgnString = pgnString.replace('\n', " ");
        // console.log('pgnString '+ pgnString);
        PgnViewer = PGNV.pgnView('board', { pgn: pgnString,  headers: false});
        placeNextMoveElement();
    }, false);
  
    if (file) {
        reader.readAsText(file);
        
    }
    
  }
  </script>

  
<!-- <script>
    async function uploadFile() {
        let formData = new FormData();           
        formData.append("file", fileupload.files[0]);
        await fetch('/upload', 
        {
          method: "POST", 
          body: formData
        });    
        var pgnString = "fileupload";
    var board = PGNV.pgnView('Uploading', { pgn: pgnString })
    }
    </script> -->

      <!-- <form action = "http://localhost:5000/uploader" method = "POST" 
      enctype = "multipart/form-data" accept=".pgn">
      <input type = "file" name = "file" />
      <input type = "submit"/>
   </form>   

   <div id="board" style="width: 400px"></div>

   <script>  
        
    var pgnString = "f.filename";
    var board = PGNV.pgnView('Uploading', { pgn: pgnString });  -->

</script>  
   

     
</body>
</html>